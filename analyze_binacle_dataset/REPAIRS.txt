#####
## Use following script to analyze small files first:
## 1. pick a small file from list of broken files
##   $> (for x in `cat BROKEN_FILES.txt | grep "not repaired" | cut -f1 -d' ' | cut -f1 -d\.`; do name="sources/$x.Dockerfile"; wc -l $name; done) | sort -n
##
##  or from the original dataset (notice there is a lot of empty files and one-liners):
##   $> gedit sortedlist-dockerfiles.txt
##
## 2. run the following script to create dir for Dockerfile and run docker build on it
##   $> FILE=sources/484144517.Dockerfile
##   $> ID=$(basename $FILE | cut -f1 -d\.); mkdir -p $ID; (cd $ID; cp ../$FILE Dockerfile; docker build -t binacle:$ID . 2>&1 | tee log.txt)
##
## 3. to rerun a docker after updating Dockerfile (to diagnose)
##   $> docker build -t binacle:$ID . 2>&1 | tee log.txt
##
####

483357603
  Error message: "useradd: UID 1000 is not unique"
  Diagnosis: A variable needed to be changed before using the Dockerfile
  Repair: Change value of variable PERM_USER_ID at line 4
  Source: "N/A"
  Hadolint: "??"

483202780
  Error message: "No package mingw32-[binutils,crt,nsis] available"
  Diagnosis: yum cannot find requested package
  Repair: "??"
  Source: https://unix.stackexchange.com/questions/327156/where-can-i-find-and-install-the-mingw-w64-packages-for-centos-7
  Hadolint: "??"

484144517
  Error message: apt-get: comand not found
  Diagnosis: missing utility function (apt-get and possibly others)
  Repair: "??"
  Source: https://askubuntu.com/questions/860375/installing-apt-get
  Hadolint: "??"

483733309xs
  Error message: "Operation failed: No such file or directory. The command '/bin/sh -c systemctl enable libvirtd' returned a non-zero code: 1" 
  Diagnosis: There is no systemd-daemon running in the container
  Repair: "??" 
  Source: https://github.com/geerlingguy/docker-fedora27-ansible/issues/2
  Hadolint: "??"

154176094
  Error message: "The repository 'http://security.ubuntu.com/ubuntu artful-security Release' does not have a Release file."
  Diagnosis: "The 17.04 repositories have been closed and withdrawn"
  Repair: "Change ubuntu version from 17.10 to 18.04"   <---- if you really repaired, show me the patch. don't explain in plain english
  Source: https://ubuntuforums.org/showthread.php?t=2382832
  Hadolint: Several warnings, but none related.

169561074
  Error message: "gpg: no valid OpenPGP data found."
  Diagnosis: "Dockerfile using broken links to install/dowload/configure"
  Repair: "Comment lines 9 and 12" <--- see comment above
  Source: https://2019.www.torproject.org/docs/debian.html.en
  Hadolint: "Only 1 warning on line 31"

176578348
  Error message: "gpg: no valid OpenPGP data found."
  Diagnosis: "Using older version of Ubuntu"
  Repair: "Change ubuntu version from 14.10 to 18.04" <--- se comment above
  Source: https://askubuntu.com/questions/329450/e-some-index-files-failed-to-download-they-have-been-ignored-or-old-ones-used
  Hadolint: "Only 1 warning on line 28"

180704908
  Error message: "E: Unable to locate package libboost1.55-all-dev"
  Diagnosis: "libboost1.55-all-dev not found in the apt repository"
  Repair: "Change value from libboost1.55-all-dev to libboost-all-dev in line 12"
  Sourece: "https://askubuntu.com/questions/806478/xenial-16-04-cannot-find-package-libboost-all-dev"
  Hadolint: "Only 1 warning on line 30"

185296869
  Error message: "pull access denied for freeradius/debian8-deps, repository does not exist or may require 'docker login': denied: requested access to the resource is denied"
  Diagnosis: "Using a non existent dockerhub resource"
  Repair: "Change line 1 from ARG from=freeradius/debian8-deps to ARG from=debian:jessie"
  Sourece: "https://hub.docker.com/_/debian?tab=tags&page=1&name=jessie"
  Hadolint: "Line 1 Always tag the version of an image explicitly"
